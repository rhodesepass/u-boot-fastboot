CONFIG_ARM=y
CONFIG_ARCH_SUNXI=y
CONFIG_MACH_SUNIV=y
CONFIG_DRAM_CLK=204
CONFIG_DRAM_ZQ=0
CONFIG_SYS_CLK_FREQ=604000000
CONFIG_TEXT_BASE=0x80C00000
CONFIG_USB_MUSB_GADGET=y
CONFIG_USB_GADGET_DUALSPEED=y
CONFIG_PHY_SUN4I_USB=y
CONFIG_SYS_LOAD_ADDR=0x80500000
CONFIG_STACK_SIZE=0x500000
CONFIG_DM_USB=y
CONFIG_DM_USB_GADGET=y        # 核心：没有这个，Fastboot 找不到从机控制器
CONFIG_USB_MUSB_PIO_ONLY=y    # 关键：F1C100s/200s 的 USB DMA 有 Bug，必须开启 PIO 模式
CONFIG_USB_GADGET_VENDOR_NAME="Allwinner"
CONFIG_USB_GADGET_PRODUCT_NAME="F1C200S-Fastboot"


CONFIG_DEFAULT_DEVICE_TREE="allwinner/suniv-f1c100s-epass"

# 存储与 MTD 支持
CONFIG_SPL=y
CONFIG_SPL_SPI_SUNXI=y
CONFIG_SPL_SPI_NAND_SUNXI=y
CONFIG_MTD=y
CONFIG_DM_MTD=y
CONFIG_MTD_SPI_NAND=y
CONFIG_SPI=y
CONFIG_DM_SPI=y
CONFIG_SPI_SUNXI=y
CONFIG_SPI_FLASH_MTD=y
CONFIG_MTD_PARTITIONS=y
CONFIG_CMD_MTD=y
CONFIG_CMD_MTDPARTS=y
CONFIG_CMD_CLK=y
CONFIG_REGEX=y

# USB Gadget & Fastboot 配置 (新增)
CONFIG_USB=y
CONFIG_DM_USB=y
CONFIG_USB_MUSB_SUNXI=y
CONFIG_USB_MUSB_GADGET=y
CONFIG_USB_GADGET=y
CONFIG_USB_GADGET_DOWNLOAD=y
CONFIG_USB_FUNCTION_FASTBOOT=y
CONFIG_FASTBOOT_FLASH=y
CONFIG_FASTBOOT_FLASH_MTD=y
CONFIG_FASTBOOT_OEM_RUN=y

# 兼容性 USB ID (使 Windows 能识别为 Android 设备)
CONFIG_USB_GADGET_VENDOR_NUM=0x18d1
CONFIG_USB_GADGET_PRODUCT_NUM=0x4e40
CONFIG_USB_GADGET_MANUFACTURER="Allwinner"

# 自动化逻辑：开机即进入 Fastboot 刷机模式
CONFIG_BOOTDELAY=0
CONFIG_BOOTCOMMAND="fastboot 0"

# 64MB RAM 内存优化
CONFIG_FASTBOOT_BUF_ADDR=0x80500000
CONFIG_FASTBOOT_BUF_SIZE=0x02000000

# 其他原有配置
CONFIG_ENV_IS_NOWHERE=y
CONFIG_NO_NET=y
CONFIG_SPI_FLASH_WINBOND=y
CONFIG_SPI_FLASH_XTX=y
CONFIG_MTDPARTS_DEFAULT="spi-nand0:-(full_chip)"
